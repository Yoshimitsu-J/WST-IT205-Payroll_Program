<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="GRCIcon.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
    <title>Payroll Calculator</title>
</head>
<body>
    <div class="navigationbar">
        <div class="logo">
            <img src="Images/Navigationlogo.png" class="navlogo" alt="Logo">
            <h1>Payroll Calculator</h1>
        </div>
        <div class="pages">
            <a href="index.html" class="formpage active-tab" id="formTab">FORM</a>
            <a href="result.html" class="resultpage" id="resultTab">RESULT</a>
        </div>
    </div>

    <div class="form">
        <form class="payroll-form" id="payrollForm" autocomplete="off">
            <h2>Payroll Computation</h2>
            <div class="input-group">
                <label for="surname">Surname</label>
                <input type="text" id="surname" name="surname" placeholder="e.g. Dela Cruz" required>
                <span class="warning" id="surnameWarning"></span>
            </div>
            <div class="input-group">
                <label for="firstname">Firstname</label>
                <input type="text" id="firstname" name="firstname" placeholder="e.g. Juan" required>
                <span class="warning" id="firstnameWarning"></span>
            </div>
            <div class="input-group">
                <label for="middlename">Middlename</label>
                <input type="text" id="middlename" name="middlename" placeholder="e.g. Santos" required>
                <span class="warning" id="middlenameWarning"></span>
            </div>
            <div class="input-group">
                <label for="rate">Daily Rate (â‚±)</label>
                <input type="number" id="rate" name="rate" min="0" placeholder="e.g. 500.00" required>
            </div>
            <div class="input-group">
                <label for="daysWorked">Days Worked</label>
                <input type="number" id="daysWorked" name="daysWorked" min="0" placeholder="e.g. 22" required>
            </div>
            <button type="button" class="compute-btn" id="computeBtn">Compute Payroll</button>

            <div class="instructions">
                <p><b>Information</b></p>
                <ul>
                    <li>Gross Pay = Rate x Days Worked</li>
                    <li>SSS Deduction = 5% of Gross Pay</li>
                    <li>Pag-ibig Deduction = 3% of Gross Pay</li>
                    <li>Philhealth Deduction = 2% of Gross Pay</li>
                    <li>Tax Deduction = 5% of Gross Pay</li>
                    <li>Total Deduction = SSS + Pag-ibig + Philhealth + Tax</li>
                    <li>Net Pay = Gross Pay - Total Deduction</li>
                </ul>
            </div>
        </form>

        <!-- Clarification Modal -->
        <div id="clarificationModal" class="modal-bg" style="display:none;">
            <div class="modal-content">
                <p>I confirm that my information are correct.</p>
                <div style="display:flex; gap:10px; margin-top:15px;">
                    <button id="confirmBtn" class="compute-btn" style="flex:1;">Proceed</button>
                    <button id="backBtn" class="compute-btn" style="flex:1; background:#ccc; color:#222;">Back</button>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        function isAlpha(str) {
        return /^[A-Za-z\s\-]+$/.test(str);
    }

        function validateNameInput(inputId, warningId) {
            const value = document.getElementById(inputId).value.trim();
            const warning = document.getElementById(warningId);
            if (!isAlpha(value)) {
                warning.textContent = "Invalid character";
                return false;
            } else {
                warning.textContent = "";
                return true;
            }
        }

        document.getElementById('surname').addEventListener('input', function() {
            validateNameInput('surname', 'surnameWarning');
        });
        document.getElementById('firstname').addEventListener('input', function() {
            validateNameInput('firstname', 'firstnameWarning');
        });
        document.getElementById('middlename').addEventListener('input', function() {
            validateNameInput('middlename', 'middlenameWarning');
        })  
        document.getElementById('computeBtn').addEventListener('click', function() {
            // Validate name fields
            const validSurname = validateNameInput('surname', 'surnameWarning');
            const validFirstname = validateNameInput('firstname', 'firstnameWarning');
            const validMiddlename = validateNameInput('middlename', 'middlenameWarning');
            if (!validSurname || !validFirstname || !validMiddlename) {
                return;
            }
            // Validate other fields
            const rate = document.getElementById('rate').value;
            const days = document.getElementById('daysWorked').value;
            if (!rate || !days) {
                alert("Please fill in all fields.");
                return;
            }
            // Show clarification modal
            document.getElementById('clarificationModal').style.display = 'flex';
        })  
        document.getElementById('backBtn').addEventListener('click', function() {
            document.getElementById('clarificationModal').style.display = 'none';
        })  
        document.getElementById('confirmBtn').addEventListener('click', function() {
            // Submit form with GET method to result.html
            const surname = encodeURIComponent(document.getElementById('surname').value.trim());
            const firstname = encodeURIComponent(document.getElementById('firstname').value.trim());
            const middlename = encodeURIComponent(document.getElementById('middlename').value.trim());
            const rate = encodeURIComponent(document.getElementById('rate').value);
            const days = encodeURIComponent(document.getElementById('daysWorked').value);
            window.location.href = `result.html?surname=${surname}&firstname=${firstname}&middlename=${middlename}&rate=${rate}&daysWorked=${days}`;
        })
    </script>
    <script>
        // Highlight RESULT tab in modal
        document.getElementById('computeBtn').addEventListener('click', function() {
            document.getElementById('formTab').classList.remove('active-tab');
            document.getElementById('resultTab').classList.add('active-tab');
        });
        // Restore FORM tab highlight when modal is closed
        document.getElementById('backBtn').addEventListener('click', function() {
            document.getElementById('resultTab').classList.remove('active-tab');
            document.getElementById('formTab').classList.add('active-tab');
        });
    </script>
</body>

</html>
